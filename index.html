<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Testly â€“ Health Made Simple</title>
  <link rel="stylesheet" href="style.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" />
</head>
<body>
  <!-- Header bar -->
  <header class="main-header">
    <div class="header-content">
      <button class="burger-menu" aria-label="Open menu">
        <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
          <line x1="3" y1="6" x2="21" y2="6"/>
          <line x1="3" y1="12" x2="21" y2="12"/>
          <line x1="3" y1="18" x2="21" y2="18"/>
        </svg>
      </button>
      <a href="index.html" class="logo">Testly</a>
      <nav class="main-nav">
        <a href="#/blood-tests">Blood tests</a>
        <a href="#/category/weight-loss">Weight Loss</a>
        <a href="#/category/mens-health">Men's Health</a>
        <a href="#/category/womens-health">Women's Health</a>
        <a href="#/category/supplements">Supplements</a>
        <div class="menu-dropdown-wrapper">
          <button class="menu-button">All</button>
          <div id="burger-dropdown" class="burger-dropdown hidden"></div>
        </div>
      </nav>
      <div class="header-actions">
        <button class="login-btn">
          <i class="fas fa-user"></i>
        </button>
      </div>
    </div>
  </header>

  <!-- Main content area -->
  <main>
    <!-- Dynamic title section -->
    <section class="dynamic-title-section">
      <div class="title-container">
        <h1 class="main-title">
          <div class="static-text">Compare and book</div>
          <div class="dynamic-text">blood tests</div>
        </h1>
      </div>
    </section>

    <!-- Hero section with 2 large boxes -->
    <section class="hero-grid-large">
      <div class="hero-box">
        <video class="hero-video" autoplay muted playsinline style="transform: translateX(20%);outline:none;border:none;">
          <source src="images/scales-video.mp4" type="video/mp4">
        </video>
        <div class="box-content">
          <div class="box-text">
            <h2>Lose weight<br>with GLP-1s</h2>
          </div>
          <button class="cta-button">Get started <span class='arrow'><svg width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M5 9h8m0 0l-3-3m3 3l-3 3" stroke="#fff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg></span></button>
        </div>
      </div>
      <div class="hero-box">
        <video class="hero-video" autoplay muted playsinline style="transform: scaleX(-1);outline:none;border:none;">
          <source src="images/man-laugh.mp4" type="video/mp4">
        </video>
        <div class="box-content">
          <div class="box-text">
            <h2>Is testosterone<br>for you?</h2>
          </div>
          <button class="cta-button">Get started <span class='arrow'><svg width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M5 9h8m0 0l-3-3m3 3l-3 3" stroke="#fff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg></span></button>
        </div>
      </div>
    </section>

    <!-- Small boxes section -->
    <section class="hero-grid-small">
      <div class="hero-box small zepbound-box" style="background-color: #C9D6CC;">
        <img src="images/blood-vials.jpg" alt="Blood vials" style="position:absolute;top:0;left:0;width:100%;height:100%;object-fit:cover;z-index:0;">
        <div class="box-content">
          <div class="box-text" style="max-width:60%;padding-right:1rem;">
            <h3 style="font-size:1rem;line-height:1.4;">Find the right<br>blood test<br>for you</h3>
          </div>
          <button class="cta-button" style="position:absolute;right:1.5rem;top:50%;transform:translateY(-50%);margin:0;"><span class='arrow'><svg width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M5 9h8m0 0l-3-3m3 3l-3 3" stroke="#fff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg></span></button>
        </div>
      </div>
      <div class="hero-box small daily-rise-box">
        <div class="box-content">
          <div class="box-text">
            <h3>Have better sex with Daily Rise</h3>
          </div>
          <button class="cta-button" style="position:absolute;right:1.5rem;top:50%;transform:translateY(-50%);margin:0;"><span class='arrow'><svg width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M5 9h8m0 0l-3-3m3 3l-3 3" stroke="#fff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg></span></button>
        </div>
      </div>
      <div class="hero-box small hair-box">
        <div class="box-content">
          <div class="box-text">
            <h3>Regrow your hair</h3>
          </div>
          <button class="cta-button" style="position:absolute;right:1.5rem;top:50%;transform:translateY(-50%);margin:0;"><span class='arrow'><svg width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M5 9h8m0 0l-3-3m3 3l-3 3" stroke="#fff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg></span></button>
        </div>
      </div>
    </section>

    <!-- Weight loss banner with video -->
    <div style="position:relative;left:50%;right:50%;margin-left:-50vw;margin-right:-50vw;width:100vw;height:300px;overflow:hidden;">
      <video class="health-banner-video" autoplay muted playsinline style="position:absolute;top:0;left:0;width:100vw;height:100%;object-fit:cover;object-position:20% 50%;z-index:0;transform:scaleX(-1);margin:0;padding:0;">
        <source src="images/weight-loss-video.mp4" type="video/mp4">
        Your browser does not support the video tag.
      </video>
      <div class="banner-text" style="position:relative;z-index:2;text-align:left;max-width:500px;color:#fff;padding:2rem 0 2rem 4rem;margin:0;">
        <h2 style="color:#fff;text-shadow:0 2px 12px rgba(0,0,0,0.5);margin-bottom:0.5rem;">Is weight loss medication right for you?</h2>
        <p style="font-size:1.1rem;color:#fff;margin:0.3rem 0 1rem;text-shadow:0 2px 12px rgba(0,0,0,0.5);">Find out if you qualify for GLP-1 medication</p>
        <button class="cta-button" style="margin-top:0.5rem;">Get started <span class='arrow'><svg width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M5 9h8m0 0l-3-3m3 3l-3 3" stroke="#111" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg></span></button>
      </div>
    </div>

    <!-- Cheapest products section -->
    <section class="cheapest-products-section">
      <div class="cheapest-products-grid cheapest-products-scroll">
        <!-- Product cards will be dynamically loaded -->
      </div>
      <div class="cheapest-products-actions-row cheapest-products-scroll">
        <!-- Action buttons will be dynamically loaded -->
      </div>
    </section>

    <!-- Tracking banner section -->
    <section class="tracking-banner">
      <div class="banner-content">
        <div class="banner-text">
          <h2>Track all your results across multiple providers</h2>
          <p>Get a complete view of your health journey with our unified dashboard</p>
          <button class="cta-button">View Dashboard</button>
        </div>
        <div class="banner-graph">
          <img src="images/graph.jpeg" alt="Upward trending graph" class="graph-image" style="width:100%;max-width:400px;display:block;margin:0 auto;" />
        </div>
      </div>
    </section>

    <!-- Blog section -->
    <div class="blog-section">
      <h2>Latest health insights</h2>
      <div class="blog-grid">
        <!-- Blog posts will be dynamically loaded -->
      </div>
    </div>
  </main>

  <!-- Pop-down panels (hidden for now) -->
  <aside id="filter-panel" class="side-panel hidden">
    <!-- Dynamic filter content will go here -->
  </aside>

  <aside id="basket-panel" class="side-panel hidden">
    <!-- Dynamic basket content will go here -->
  </aside>

  <script type="module" src="js/main.js"></script>
  
  <!-- Firebase SDK -->
  <script type="module">
    // Import the functions you need from the SDKs you need
    import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
    import { getAnalytics } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-analytics.js";
    import { getAuth } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js";

    // Your web app's Firebase configuration
    // For Firebase JS SDK v7.20.0 and later, measurementId is optional
    const firebaseConfig = {
      apiKey: "AIzaSyBmPdj-KnRdFosy-Z5tNATGcaF1OZyusyY",
      authDomain: "testly-health-5f1ae.firebaseapp.com",
      projectId: "testly-health-5f1ae",
      storageBucket: "testly-health-5f1ae.firebasestorage.app",
      messagingSenderId: "506666008093",
      appId: "1:506666008093:web:6f38b04d6d8928c40f50f4",
      measurementId: "G-L7N7DD13RV"
    };

    // Initialize Firebase
    const app = initializeApp(firebaseConfig);
    const analytics = getAnalytics(app);
    const auth = getAuth(app);

    // Configure auth for local development
    auth.useDeviceLanguage();
    auth.settings.appVerificationDisabledForTesting = true; // Enable this for local testing

    // Make auth available globally
    window.firebaseAuth = auth;

    // Log initialization
    console.log('Firebase initialized with config:', {
      authDomain: firebaseConfig.authDomain,
      currentDomain: window.location.hostname,
      currentOrigin: window.location.origin
    });

    // Dispatch event when Firebase is ready
    window.dispatchEvent(new Event('firebaseReady'));
  </script>

  <!-- Dynamic content initialization -->
  <script type="module">
    // Initialize dynamic title text animation
    const dynamicText = document.querySelector('.dynamic-text');
    const phrases = [
      'blood tests',
      'weight loss treatments',
      'hormone clinics',
      'supplements'
    ];
    let currentIndex = 0;

    function updateDynamicText() {
      dynamicText.classList.add('fade-out');
      
      setTimeout(() => {
        dynamicText.textContent = phrases[currentIndex];
        dynamicText.classList.remove('fade-out');
        currentIndex = (currentIndex + 1) % phrases.length;
      }, 500);
    }

    // Initial update
    updateDynamicText();
    
    // Set up the interval for subsequent updates
    setInterval(updateDynamicText, 3000);

    // Handle video playback
    const videos = document.querySelectorAll('.hero-video');
    videos.forEach((video, index) => {
      if (index === 1) { // testosterone video
        const timeUpdateHandler = function() {
          if (video.currentTime >= 6) { // Stop after 6 seconds
            video.pause();
            video.currentTime = 6; // Keep at 6 second mark
            video.removeEventListener('timeupdate', timeUpdateHandler); // Remove listener after pausing
          }
        };
        video.addEventListener('timeupdate', timeUpdateHandler);
      }

      video.onended = function() {
        video.pause();
        if (index === 0) { // scales video
          video.currentTime = video.duration;
        } else { // testosterone video
          video.currentTime = 6; // Keep at 6 second mark
        }
      };
    });

    // Handle weight loss banner video
    const weightLossVideo = document.querySelector('.health-banner-video');
    if (weightLossVideo) {
      weightLossVideo.playbackRate = 0.75;
      weightLossVideo.pause();
      // Only play when visible
      const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
          if (entry.isIntersecting) {
            weightLossVideo.play();
          }
        });
      }, { threshold: 0.3 });
      observer.observe(weightLossVideo);
      weightLossVideo.onended = function() {
        weightLossVideo.pause();
        weightLossVideo.currentTime = weightLossVideo.duration;
        observer.disconnect();
      };
    }
  </script>
</body>
</html>
